<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="empty_gripper">
    <Fallback>
      <Precondition else="FAILURE"
                    if="empty_hand==&apos;empty&apos;">
        <AlwaysSuccess/>
      </Precondition>
      <Precondition else="FAILURE"
                    if="empty_hand==&apos;beaker_250ml&apos;">
        <Sequence>
          <PlaceVesselNode message="{message}"
                           workstation_name="{workstation}"
                           name_="&apos;beaker_250ml&apos;"
                           aruco_id="{aruco_id}"
                           success="{success}"
                           tray_id="{storage_vessel_tray}"
                           lookout_pose="{lookout_pose}"
                           aruco_to_slot_transform="{aruco_to_slot_transform}"
                           slot_to_slot_transform="{slot_to_slot_transform}"
                           service_name="__default__placeholder__"/>
          <SubTree ID="visual_place"
                   lookout_pose_msg="{lookout_pose}"
                   keep_orientation="false"
                   aruco_id="{aruco_id}"
                   slot_to_slot="{slot_to_slot_transform}"
                   approach_offset="0.0;0.0;-0.2;0.0;0.0;0.0"
                   aruco_to_slot="{aruco_to_slot_transform}"
                   empty_hand="{empty_hand}"/>
          <Script code="empty_hand:=&apos;empty&apos;"/>
        </Sequence>
      </Precondition>
      <Sequence>
        <PlaceChemicalNode message="{message}"
                           workstation_name="{workstation}"
                           name_="{empty_hand}"
                           aruco_id="{aruco_id}"
                           emptied="{emptied}"
                           success="{success}"
                           tray_id="{side_grasp_tray}"
                           lookout_pose="{lookout_pose}"
                           aruco_to_slot_transform="{aruco_to_slot_transform}"
                           slot_to_slot_transform="{slot_to_slot_transform}"
                           service_name="__default__placeholder__"/>
        <SubTree ID="visual_place"
                 lookout_pose_msg="{lookout_pose}"
                 keep_orientation="true"
                 aruco_id="{aruco_id}"
                 slot_to_slot="{slot_to_slot_transform}"
                 approach_offset="0.0;0.0;-0.2;0.0;0.0;0.0"
                 aruco_to_slot="{aruco_to_slot_transform}"
                 empty_hand="{empty_hand}"/>
        <Script code="empty_hand:=&apos;empty&apos;"/>
      </Sequence>
    </Fallback>
  </BehaviorTree>

  <BehaviorTree ID="grasp_pose_msg">
    <Sequence>
      <Script code="object_is_not_there:=0"/>
      <PrintValue message="4"/>
      <Sleep msec="200"/>
      <ArmPoseMsgOffsetCalculation offset="{approch_offset}"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{approch_pose}"/>
      <PrintValue message="5"/>
      <GripperJointAction joint_2="0.04"
                          speed="0.02"
                          accel="0.02"
                          joint_1="0.04"
                          action_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <PrintValue message="6"/>
      <ArmMovePoseMsgAction pose="{approch_pose}"
                            speed="0.2"
                            accel="0.2"
                            keep_orientation="false"
                            lin="false"
                            action_name="__default__placeholder__"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Fallback>
        <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg}"
                                     speed="0.05"
                                     accel="0.05"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg}"
                                     speed="0.02"
                                     accel="0.02"
                                     action_name="__default__placeholder__"/>
      </Fallback>
      <Sleep msec="200"/>
      <Sleep msec="200"/>
      <Fallback>
        <SubTree ID="gripping"
                 width="0.02"
                 speed="0.03"
                 force="2"
                 epsilon="0.015"/>
        <Sequence>
          <Sleep msec="1000"/>
          <SubTree ID="gripping"
                   width="0.02"
                   speed="0.03"
                   force="2"
                   epsilon="0.015"/>
        </Sequence>
        <Sequence>
          <Script code="object_is_not_there:=1"/>
          <ArmMovePlizLinPoseMsgAction pose="{approch_pose}"
                                       speed="0.05"
                                       accel="0.05"
                                       action_name="__default__placeholder__"/>
          <RemoveObjectNode object_id="{object_id}"
                            service_name="__default__placeholder__"/>
          <AlwaysFailure/>
        </Sequence>
      </Fallback>
      <AttachObjectNode object_id="{object_id}"
                        service_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Fallback>
        <ArmMovePlizLinPoseMsgAction pose="{approch_pose}"
                                     speed="0.05"
                                     accel="0.05"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{approch_pose}"
                                     speed="0.02"
                                     accel="0.02"
                                     action_name="__default__placeholder__"/>
      </Fallback>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="grasp_pour_msg">
    <Sequence>
      <Sleep msec="200"/>
      <ArmPoseMsgOffsetCalculation offset="{approach_offset}"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{approach_pose}"/>
      <ArmPoseMsgOffsetCalculation offset="{retract_offset}"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{retract_pose}"/>
      <GripperJointAction joint_2="0.04"
                          speed="0.02"
                          accel="0.02"
                          joint_1="0.04"
                          action_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Sleep msec="100"/>
      <RetryUntilSuccessful num_attempts="2">
        <Fallback>
          <Sequence>
            <ArmMovePoseMsgAction pose="{approach_pose}"
                                  speed="0.2"
                                  accel="0.2"
                                  keep_orientation="false"
                                  lin="false"
                                  action_name="__default__placeholder__"/>
            <ClearOctomapNode service_name="__default__placeholder__"/>
            <Sleep msec="200"/>
            <Fallback>
              <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg}"
                                           speed="0.008"
                                           accel="0.008"
                                           action_name="__default__placeholder__"/>
              <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg}"
                                           speed="0.004"
                                           accel="0.004"
                                           action_name="__default__placeholder__"/>
              <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg}"
                                           speed="0.002"
                                           accel="0.002"
                                           action_name="__default__placeholder__"/>
            </Fallback>
            <Sleep msec="200"/>
            <Sleep msec="200"/>
          </Sequence>
          <Sequence>
            <HomeArmAction action_name="__default__placeholder__"/>
            <AlwaysFailure/>
          </Sequence>
        </Fallback>
      </RetryUntilSuccessful>
      <Fallback>
        <SubTree ID="gripping"
                 width="0.02"
                 speed="0.03"
                 force="2"
                 epsilon="0.015"/>
        <Sequence>
          <Sleep msec="1000"/>
          <SubTree ID="gripping"
                   width="0.02"
                   speed="0.03"
                   force="2"
                   epsilon="0.015"/>
        </Sequence>
      </Fallback>
      <AttachObjectNode object_id="{object_id}"
                        service_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <Fallback>
        <ArmMovePlizLinPoseMsgAction pose="{retract_pose}"
                                     speed="0.008"
                                     accel="0.008"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{retract_pose}"
                                     speed="0.004"
                                     accel="0.004"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{retract_pose}"
                                     speed="0.002"
                                     accel="0.002"
                                     action_name="__default__placeholder__"/>
      </Fallback>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="gripping">
    <Fallback>
      <Sequence>
        <FrankaGraspGripperAction width="{width}"
                                  speed="{speed}"
                                  force="{force}"
                                  epsilon="{epsilon}"
                                  action_name="__default__placeholder__"/>
        <Sleep msec="1000"/>
      </Sequence>
      <Sequence>
        <FrankaGraspGripperAction width="{width}"
                                  speed="{speed}"
                                  force="{force}"
                                  epsilon="{epsilon}"
                                  action_name="__default__placeholder__"/>
        <Sleep msec="1000"/>
      </Sequence>
    </Fallback>
  </BehaviorTree>

  <BehaviorTree ID="haptic_calibration">
    <Sequence>
      <AlwaysSuccess/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="init">
    <Sequence>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <HomeArmAction action_name="__default__placeholder__"/>
      <FrankaMoveGripperAction width="0.039"
                               speed="0.02"
                               action_name="__default__placeholder__"/>
      <FrankaHomeGripperAction action_name="__default__placeholder__"/>
      <FrankaMoveGripperAction width="0.078"
                               speed="0.03"
                               action_name="__default__placeholder__"/>
      <Script code="empty_hand:=&apos;empty&apos;"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="pick_and_place_test">
    <Sequence>
      <Script code="empty_hand:=&apos;empty&apos;"/>
      <SubTree ID="init"
               empty_hand="{empty_hand}"/>
      <GetChemicalNode message="{result_messages}"
                       workstation_name="{workstation}"
                       name_="natrium_chloride"
                       aruco_id="{aruco_id}"
                       empty="{empty}"
                       success="{success}"
                       lookout_pose="{lookout_pose_msg}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       type_="pick"
                       slot_id="{slot_id}"
                       service_name="__default__placeholder__"/>
      <Repeat num_cycles="10">
        <Sequence>
          <SubTree ID="visual_grasp"
                   aruco_id="{aruco_id}"
                   lookout_pose_msg="{lookout_pose_msg}"
                   aruco_to_slot="{aruco_to_slot}"
                   slot_to_slot="{slot_to_slot}"
                   keep_orientation="false"
                   approach_offset="0.0;0.0;-0.2;0.0;0.0;0.0"
                   object_not_there="{object_not_there}"
                   reagent="natrium_chloride"
                   empty_hand="{empty_hand}"/>
          <Script code="empty_hand:=&apos;natrium_chloride&apos;"/>
          <SubTree ID="visual_place"
                   lookout_pose_msg="{lookout_pose_msg}"
                   keep_orientation="true"
                   aruco_id="{aruco_id}"
                   slot_to_slot="{slot_to_slot}"
                   approach_offset="0.0;0.0;-0.2;0.0;0.0;0.0"
                   aruco_to_slot="{aruco_to_slot}"
                   empty_hand="{empty_hand}"/>
          <Script code="empty_hand:=&apos;empty&apos;"/>
        </Sequence>
      </Repeat>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="place_pose_msg">
    <Sequence>
      <Sleep msec="200"/>
      <ArmPoseMsgOffsetCalculation offset="{approach_offset}"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{approach_pose}"/>
      <Sleep msec="200"/>
      <RetryUntilSuccessful num_attempts="3">
        <ArmMovePoseMsgAction pose="{approach_pose}"
                              speed="0.2"
                              accel="0.2"
                              keep_orientation="false"
                              lin="false"
                              action_name="__default__placeholder__"/>
      </RetryUntilSuccessful>
      <DetachObjectNode object_id="{object_id}"
                        service_name="__default__placeholder__"/>
      <RemoveObjectNode object_id="{object_id}"
                        service_name="__default__placeholder__"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ArmPoseMsgOffsetCalculation offset="0.0;0.0;-0.01;0.0;0.0;0.0"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{target_pose_msg1}"/>
      <Fallback>
        <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg1}"
                                     speed="0.05"
                                     accel="0.05"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{target_pose_msg1}"
                                     speed="0.02"
                                     accel="0.02"
                                     action_name="__default__placeholder__"/>
      </Fallback>
      <Sleep msec="200"/>
      <FrankaMoveGripperAction width="0.078"
                               speed="0.03"
                               action_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <Fallback>
        <ArmMovePlizLinPoseMsgAction pose="{approach_pose}"
                                     speed="0.1"
                                     accel="0.1"
                                     action_name="__default__placeholder__"/>
        <ArmMovePlizLinPoseMsgAction pose="{approach_pose}"
                                     speed="0.02"
                                     accel="0.02"
                                     action_name="__default__placeholder__"/>
      </Fallback>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="visual_calibration">
    <Sequence>
      <AlwaysSuccess/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="visual_grasp">
    <Sequence>
      <ArmMovePoseMsgAction pose="{lookout_pose_msg}"
                            speed="0.2"
                            accel="0.2"
                            keep_orientation="{keep_orientation}"
                            lin="false"
                            action_name="__default__placeholder__"/>
      <PrintValue message="1"/>
      <Fallback>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="double_check"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="double_check"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
      </Fallback>
      <PrintValue message="2"/>
      <ArmPoseMsgOffsetCalculation offset="0.0;0.0;0.;0.0;0.0;0.0"
                                   pose="{object_pose_msg2}"
                                   pose_w_offset="{second_lookout}"/>
      <ArmMovePoseMsgAction pose="{second_lookout}"
                            speed="0.2"
                            accel="0.2"
                            keep_orientation="{keep_orientation}"
                            lin="false"
                            action_name="__default__placeholder__"/>
      <Fallback>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="grab_pose"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="grab_pose"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
      </Fallback>
      <AddObjectNode pose="{object_pose_msg2}"
                     object_id="{reagent}"
                     shape="cylinder"
                     size_x="0.02"
                     size_y="0.15.5"
                     service_name="__default__placeholder__"/>
      <PrintValue message="3"/>
      <SubTree ID="grasp_pose_msg"
               target_pose_msg="{object_pose_msg2}"
               approch_offset="{approach_offset}"
               object_id="{reagent}"
               object_is_not_there="{object_not_there}"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="visual_place">
    <Sequence>
      <Fallback>
        <ArmMovePoseMsgAction pose="{lookout_pose_msg}"
                              speed="0.2"
                              accel="0.2"
                              keep_orientation="{keep_orientation}"
                              lin="false"
                              action_name="__default__placeholder__"/>
        <ArmMovePoseMsgAction pose="{lookout_pose_msg}"
                              speed="0.2"
                              accel="0.2"
                              keep_orientation="{keep_orientation}"
                              lin="false"
                              action_name="__default__placeholder__"/>
      </Fallback>
      <Fallback>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="double_check"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="double_check"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
      </Fallback>
      <ArmPoseMsgOffsetCalculation offset="0.0;0.0;0.0;0.0;0.0;0.0"
                                   pose="{object_pose_msg2}"
                                   pose_w_offset="{second_lookout}"/>
      <Fallback>
        <ArmMovePoseMsgAction pose="{second_lookout}"
                              speed="0.2"
                              accel="0.2"
                              keep_orientation="{keep_orientation}"
                              lin="false"
                              action_name="__default__placeholder__"/>
        <Sequence>
          <ArmPoseMsgOffsetCalculation offset="0.0;0.0;-0.05;0.0;0.0;0.0"
                                       pose="{object_pose_msg2}"
                                       pose_w_offset="{second_lookout2}"/>
          <ArmMovePoseMsgAction pose="{second_lookout2}"
                                speed="0.2"
                                accel="0.2"
                                keep_orientation="{keep_orientation}"
                                lin="false"
                                action_name="__default__placeholder__"/>
        </Sequence>
      </Fallback>
      <Fallback>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="grab_pose"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
        <Sequence>
          <ArucoAction id="{aruco_id}"
                       aruco_to_slot_transform="{aruco_to_slot}"
                       slot_to_slot_transform="{slot_to_slot}"
                       Transform="{object_pose_msg}"
                       action_name="__default__placeholder__"/>
          <RetryUntilSuccessful num_attempts="5">
            <LookupTransformNode result="{bool_result}"
                                 transform="{object_pose_msg2}"
                                 source="grab_pose"
                                 target="panda_link0"
                                 service_name="__default__placeholder__"/>
          </RetryUntilSuccessful>
        </Sequence>
      </Fallback>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <SubTree ID="place_pose_msg"
               target_pose_msg="{object_pose_msg2}"
               approach_offset="{approach_offset}"
               object_id="{empty_hand}"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="visual_pour">
    <Sequence>
      <GetChemicalNode message="{result_messages1}"
                       workstation_name="{workstation1}"
                       name_="{chemical_name}"
                       aruco_id="{aruco_id1}"
                       empty="{empty1}"
                       success="{success1}"
                       lookout_pose="{lookout_pose_msg1}"
                       aruco_to_slot_transform="{aruco_to_slot1}"
                       slot_to_slot_transform="{slot_to_slot1}"
                       type_="pick"
                       slot_id="{slot_id}"
                       service_name="__default__placeholder__"/>
      <GetVesselNode message="{result_messages2}"
                     workstation_name="{workstation2}"
                     name_="{vessel_name}"
                     aruco_id="{aruco_id2}"
                     success="{empty2}"
                     lookout_pose="{lookout_pose_msg2}"
                     aruco_to_slot_transform="{aruco_to_slot2}"
                     slot_to_slot_transform="{slot_to_slot2}"
                     service_name="__default__placeholder__"/>
      <ArmMovePoseMsgAction pose="{lookout_pose_msg2}"
                            speed="0.2"
                            accel="0.2"
                            keep_orientation="false"
                            lin="false"
                            action_name="__default__placeholder__"/>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <RetryUntilSuccessful num_attempts="3">
        <Sequence>
          <ArucoAction id="{aruco_id1}"
                       aruco_to_slot_transform="{aruco_to_slot1}"
                       slot_to_slot_transform="{slot_to_slot1}"
                       Transform="{aruco_pose1}"
                       action_name="__default__placeholder__"/>
          <LookupTransformNode result="{bool_result1}"
                               transform="{object_pose_msg1}"
                               source="double_check"
                               target="panda_link0"
                               service_name="__default__placeholder__"/>
          <ArucoAction id="{aruco_id2}"
                       aruco_to_slot_transform="{aruco_to_slot2}"
                       slot_to_slot_transform="{slot_to_slot2}"
                       Transform="{aruco_pose2}"
                       action_name="__default__placeholder__"/>
          <LookupTransformNode result="{bool_result2}"
                               transform="{object_pose_msg2}"
                               source="double_check"
                               target="panda_link0"
                               service_name="__default__placeholder__"/>
        </Sequence>
      </RetryUntilSuccessful>
      <ClearOctomapNode service_name="__default__placeholder__"/>
      <RetryUntilSuccessful num_attempts="3">
        <Sequence>
          <ArmMovePoseMsgAction pose="{object_pose_msg1}"
                                speed="0.2"
                                accel="0.2"
                                keep_orientation="false"
                                lin="false"
                                action_name="__default__placeholder__"/>
          <ArucoAction id="{aruco_id1}"
                       aruco_to_slot_transform="{aruco_to_slot1}"
                       slot_to_slot_transform="{slot_to_slot1}"
                       Transform="{aruco_pose1}"
                       action_name="__default__placeholder__"/>
          <LookupTransformNode result="{bool_result1}"
                               transform="{object_pose_msg1}"
                               source="grab_pose"
                               target="panda_link0"
                               service_name="__default__placeholder__"/>
        </Sequence>
      </RetryUntilSuccessful>
      <RetryUntilSuccessful num_attempts="3">
        <Sequence>
          <ArmMovePoseMsgAction pose="{object_pose_msg2}"
                                speed="0.2"
                                accel="0.2"
                                keep_orientation="false"
                                lin="false"
                                action_name="__default__placeholder__"/>
          <ArucoAction id="{aruco_id2}"
                       aruco_to_slot_transform="{aruco_to_slot2}"
                       slot_to_slot_transform="{slot_to_slot2}"
                       Transform="{aruco_pose2}"
                       action_name="__default__placeholder__"/>
          <LookupTransformNode result="{bool_result2}"
                               transform="{object_pose_msg2}"
                               source="grab_pose"
                               target="panda_link0"
                               service_name="__default__placeholder__"/>
        </Sequence>
      </RetryUntilSuccessful>
      <AddObjectNode pose="{object_pose_msg1}"
                     object_id="{chemical_name}"
                     shape="cylinder"
                     size_x="0.02"
                     size_y="0.155"
                     service_name="__default__placeholder__"/>
      <AddObjectNode pose="{object_pose_msg2}"
                     object_id="{vessel_name}"
                     shape="cylinder"
                     size_x="0.08"
                     size_y="0.096"
                     service_name="__default__placeholder__"/>
      <GetPrePourPoseNode container_name="{vessel_name}"
                          pose_bottle="{bottle_pose}"
                          bottle_name="{chemical_name}"
                          result="{result}"
                          pose_container="{pose_besides_container}"
                          service_name="__default__placeholder__"/>
      <SubTree ID="grasp_pour_msg"
               target_pose_msg="{bottle_pose}"
               retract_offset="0.0;0.0;-0.11;0.0;0.0;0.0"
               approach_offset="0.1;0.0;0.0;0.0;0.0;0.0"
               object_id="{chemical_name}"/>
      <ArmMovePoseMsgAction pose="{pose_besides_container}"
                            speed="0.15"
                            accel="0.15"
                            keep_orientation="false"
                            lin="true"
                            action_name="__default__placeholder__"/>
      <Script code="relative_joint:= &apos;0.0;0.0;0.0;0.0;0.0;0.0;-2.1&apos;"/>
      <ArmMoveJointsRelativeAction joints="{relative_joint}"
                                   speed="0.1"
                                   accel="0.1"
                                   action_name="__default__placeholder__"/>
      <Script code="relative_joint:= &apos;0.0;0.0;0.0;0.0;0.0;0.0;2.1&apos;"/>
      <ArmMoveJointsRelativeAction joints="{relative_joint}"
                                   speed="0.1"
                                   accel="0.1"
                                   action_name="__default__placeholder__"/>
      <SubTree ID="place_pose_msg"
               target_pose_msg="{bottle_pose}"
               approach_offset="0.0;0.0;-0.15;0.0;0.0;0.0"
               object_id="{chemical_name}"/>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="AddObjectNode">
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="object_id"
                  type="signed char"/>
      <input_port name="shape"
                  type="std::string"/>
      <input_port name="size_x"
                  type="double"/>
      <input_port name="size_y"
                  type="double"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="ArmMoveJointsRelativeAction">
      <input_port name="joints"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="accel"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmMovePlizLinPoseMsgAction">
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="accel"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmMovePoseMsgAction">
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="accel"
                  type="double"/>
      <input_port name="keep_orientation"
                  type="bool"/>
      <input_port name="lin"
                  type="bool"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmPoseMsgOffsetCalculation">
      <input_port name="offset"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="pose_w_offset"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
    </Action>
    <Action ID="ArucoAction">
      <input_port name="id"
                  type="unsigned char"/>
      <input_port name="aruco_to_slot_transform"
                  type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="slot_to_slot_transform"
                  type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="Transform"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="AttachObjectNode">
      <input_port name="object_id"
                  type="signed char"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="ClearOctomapNode">
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="DetachObjectNode">
      <input_port name="object_id"
                  type="signed char"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="FrankaGraspGripperAction">
      <input_port name="width"
                  type="double"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="force"
                  type="double"/>
      <input_port name="epsilon"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="FrankaHomeGripperAction">
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="FrankaMoveGripperAction">
      <input_port name="width"
                  type="double"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="GetChemicalNode">
      <output_port name="message"
                   type="std::string"/>
      <output_port name="workstation_name"
                   type="std::string"/>
      <input_port name="name_"
                  type="std::string"/>
      <output_port name="aruco_id"
                   type="signed char"/>
      <output_port name="empty"
                   type="bool"/>
      <output_port name="success"
                   type="bool"/>
      <output_port name="lookout_pose"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="aruco_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="slot_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="type_"
                  type="std::string"/>
      <output_port name="slot_id"
                   type="signed char"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="GetPrePourPoseNode">
      <input_port name="container_name"
                  type="std::string"/>
      <output_port name="pose_bottle"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="bottle_name"
                  type="std::string"/>
      <output_port name="result"
                   type="bool"/>
      <output_port name="pose_container"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="GetVesselNode">
      <output_port name="message"
                   type="std::string"/>
      <output_port name="workstation_name"
                   type="std::string"/>
      <input_port name="name_"
                  type="std::string"/>
      <output_port name="aruco_id"
                   type="signed char"/>
      <output_port name="success"
                   type="bool"/>
      <output_port name="lookout_pose"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="aruco_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="slot_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="GripperJointAction">
      <input_port name="joint_2"
                  type="double"/>
      <input_port name="speed"
                  type="double"/>
      <input_port name="accel"
                  type="double"/>
      <input_port name="joint_1"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="HomeArmAction">
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="LookupTransformNode">
      <output_port name="result"
                   type="bool"/>
      <output_port name="transform"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="source"
                  type="std::string"/>
      <input_port name="target"
                  type="std::string"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="PlaceChemicalNode">
      <output_port name="message"
                   type="std::string"/>
      <output_port name="workstation_name"
                   type="std::string"/>
      <input_port name="name_"
                  type="std::string"/>
      <output_port name="aruco_id"
                   type="signed char"/>
      <input_port name="emptied"
                  type="bool"/>
      <output_port name="success"
                   type="bool"/>
      <input_port name="tray_id"
                  type="int"/>
      <output_port name="lookout_pose"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="aruco_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="slot_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="PlaceVesselNode">
      <output_port name="message"
                   type="std::string"/>
      <output_port name="workstation_name"
                   type="std::string"/>
      <input_port name="name_"
                  type="std::string"/>
      <output_port name="aruco_id"
                   type="signed char"/>
      <output_port name="success"
                   type="bool"/>
      <input_port name="tray_id"
                  type="int"/>
      <output_port name="lookout_pose"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="aruco_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="slot_to_slot_transform"
                   type="geometry_msgs::msg::TransformStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <Action ID="PrintValue">
      <input_port name="message"
                  type="std::string"/>
    </Action>
    <Action ID="RemoveObjectNode">
      <input_port name="object_id"
                  type="signed char"/>
      <input_port name="service_name"
                  default="__default__placeholder__"
                  type="std::string">Service name</input_port>
    </Action>
    <SubTree ID="grasp_pose_msg"
             editable="true">
      <input_port name="target_pose_msg"/>
      <input_port name="approch_offset"/>
      <input_port name="object_id"/>
      <inout_port name="object_is_not_there"
                  default="0"/>
    </SubTree>
    <SubTree ID="grasp_pour_msg"
             editable="true">
      <input_port name="target_pose_msg"/>
      <input_port name="retract_offset"/>
      <input_port name="approach_offset"/>
      <input_port name="object_id"/>
    </SubTree>
    <SubTree ID="gripping"
             editable="true">
      <input_port name="width"
                  default="0.02"/>
      <input_port name="speed"
                  default="0.03"/>
      <input_port name="force"
                  default="5"/>
      <input_port name="epsilon"
                  default="0.02"/>
    </SubTree>
    <SubTree ID="init"
             editable="true">
      <output_port name="empty_hand"
                   default="&apos;empty&apos;"/>
    </SubTree>
    <SubTree ID="place_pose_msg"
             editable="true">
      <input_port name="target_pose_msg"/>
      <input_port name="approach_offset"/>
      <input_port name="object_id"/>
    </SubTree>
    <SubTree ID="visual_grasp"
             editable="true">
      <input_port name="aruco_id"/>
      <input_port name="lookout_pose_msg"/>
      <input_port name="aruco_to_slot"/>
      <input_port name="slot_to_slot"/>
      <input_port name="keep_orientation"/>
      <input_port name="approach_offset"
                  default="0.0;0.0;-0.1;0.0;0.0;0.0"/>
      <inout_port name="object_not_there"
                  default="0"/>
      <inout_port name="reagent"/>
      <inout_port name="empty_hand"/>
    </SubTree>
    <SubTree ID="visual_place"
             editable="true">
      <input_port name="lookout_pose_msg"/>
      <input_port name="keep_orientation"/>
      <input_port name="aruco_id"/>
      <input_port name="slot_to_slot"/>
      <input_port name="approach_offset"/>
      <input_port name="aruco_to_slot"/>
      <input_port name="empty_hand"/>
    </SubTree>
  </TreeNodesModel>

</root>
