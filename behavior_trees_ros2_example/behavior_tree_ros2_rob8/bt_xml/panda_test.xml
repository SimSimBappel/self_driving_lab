<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4">
  <BehaviorTree ID="Grasp">
    <Sequence>
      <Script code="in_name:= &apos;0.623;-0.2;0.281;-3.142;0.0;0.0&apos; "/>
      <GripperAction open="open"
                     action_name="__default__placeholder__"/>
      <ArmMovePoseAction pose="{in_name}"
                         action_name="__default__placeholder__"/>
      <GripperAction open="close"
                     action_name="__default__placeholder__"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="GraspObject">
    <Sequence>
      <GripperAction open="open"
                     action_name="__default__placeholder__"/>
      <ArmPoseOffsetCalculation offset="&apos;0.0;0.0;0.1;0.0;0.0;0.0&apos;"
                                pose="{goal}"
                                pose_w_offset="{goal_w_offset}"/>
      <ArmMovePoseAction pose="{goal_w_offset}"
                         action_name="__default__placeholder__"/>
      <ArmMovePoseAction pose="{goal}"
                         action_name="__default__placeholder__"/>
      <GripperAction open="close"
                     action_name="__default__placeholder__"/>
      <ArmMovePoseAction pose="{goal_w_offset}"
                         action_name="__default__placeholder__"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MainTree">
    <Sequence>
      <Script code="in_name:= &apos;john&apos; "/>
      <SubTree ID="MySub"
               sub_in_value="42"
               sub_in_name="{in_name}"
               sub_out_result="{out_result}"
               sub_out_state="{out_state}"/>
      <ScriptCondition code=" out_result==69 &amp;&amp; out_state==&apos;ACTIVE&apos; "/>
      <Script code="in_pose:= &apos;0.623;-0.2;0.281;-3.142;0.0;0.0&apos;"/>
      <PrintValue message="start"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
      <ArmMovePoseAction name="arm"
                         pose="{in_pose}"
                         action_name="__default__placeholder__"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
      <Script code="home:=&apos;0.0;0.5;0.0;0.0;0.0;0.0;0.0&apos;"/>
      <ArmMoveJointsAction name="arm_joint_pose"
                           joints="{home}"
                           action_name="__default__placeholder__"/>
      <Script code="offset:=&apos;0.5;0.0;0.0;0.0;0.0;0.0;0.0&apos;"/>
      <ArmPoseOffsetCalculation offset="{offset}"
                                pose="{home}"
                                pose_w_offset="{home}"/>
      <ArmMoveJointsAction joints="{home}"
                           action_name="__default__placeholder__"/>
      <GripperAction name="gripper_close"
                     open="false"
                     action_name="__default__placeholder__"/>
      <Script code="object_pose:=&apos;0.623;-0.2;0.281;-3.142;0.0;0.0&apos;"/>
      <ArmMovePoseAction name="arm"
                         pose="{object_pose}"
                         action_name="__default__placeholder__"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
      <Script code="object_pose:=&apos;0.623;-0.2;0.381;-3.142;0.0;0.0&apos;"/>
      <ArmArrayToPoseAction array="{object_pose}"
                            pose="{object_pose_msg}"/>
      <SubTree ID="grasp_pose_msg"
               target_pose_msg="{object_pose_msg}"
               approch_offset="0.0;0.0;0.1;0.0;0.0;0.0"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
      <Script code="object_pose:=&apos;0.623;-0.2;0.381;-3.142;0.0;0.0&apos;"/>
      <ArmMovePoseAction name="arm"
                         pose="{object_pose}"
                         action_name="__default__placeholder__"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
      <SleepAction name="sleepA"
                   msec="200"
                   action_name="__default__placeholder__"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="MySub">
    <Sequence>
      <ScriptCondition code="sub_in_value==42 &amp;&amp; sub_in_name==&apos;john&apos;"/>
      <Script code="sub_out_result:=69; sub_out_state:=&apos;ACTIVE&apos;"/>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="grasp_pose_msg">
    <Sequence>
      <Sleep msec="200"/>
      <ArmPoseMsgOffsetCalculation offset="{approch_offset}"
                                   pose="{target_pose_msg}"
                                   pose_w_offset="{approch_pose}"/>
      <GripperJointAction joint_2="0.03"
                          joint_1="0.03"
                          action_name="__default__placeholder__"/>
      <Sleep msec="2000"/>
      <ArmMovePoseMsgAction pose="{approch_pose}"
                            action_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <ArmMovePoseMsgAction pose="{target_pose_msg}"
                            action_name="__default__placeholder__"/>
      <Sleep msec="200"/>
      <GripperJointAction joint_2="0.01"
                          joint_1="0.01"
                          action_name="__default__placeholder__"/>
      <Sleep msec="2000"/>
      <ArmMovePoseMsgAction pose="{approch_pose}"
                            action_name="__default__placeholder__"/>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="ArmArrayToPoseAction">
      <input_port name="array"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <output_port name="pose"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
    </Action>
    <Action ID="ArmMoveJointsAction">
      <input_port name="joints"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmMovePoseAction">
      <input_port name="pose"
                  type="std::string"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmMovePoseMsgAction">
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="ArmPoseMsgOffsetCalculation">
      <input_port name="offset"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <input_port name="pose"
                  type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
      <output_port name="pose_w_offset"
                   type="geometry_msgs::msg::PoseStamped_&lt;std::allocator&lt;void&gt; &gt;"/>
    </Action>
    <Action ID="ArmPoseOffsetCalculation">
      <input_port name="offset"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <input_port name="pose"
                  type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
      <output_port name="pose_w_offset"
                   type="std::vector&lt;double, std::allocator&lt;double&gt; &gt;"/>
    </Action>
    <Action ID="GripperAction">
      <input_port name="open"
                  type="unsigned int"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <Action ID="GripperJointAction">
      <input_port name="joint_2"
                  type="double"/>
      <input_port name="joint_1"
                  type="double"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <SubTree ID="MySub">
      <input_port name="sub_in_value"
                  default="42"/>
      <input_port name="sub_in_name"/>
      <output_port name="sub_out_result"
                   default="{out_result}"/>
      <output_port name="sub_out_state"/>
    </SubTree>
    <Action ID="PrintValue">
      <input_port name="message"
                  type="std::string"/>
    </Action>
    <Action ID="SleepAction">
      <input_port name="msec"
                  type="unsigned int"/>
      <input_port name="action_name"
                  default="__default__placeholder__"
                  type="std::string">Action server name</input_port>
    </Action>
    <SubTree ID="grasp_pose_msg"
             editable="true">
      <input_port name="target_pose_msg"/>
      <input_port name="approch_offset"
                  default="&apos;0.0;0.0;0.1;0.0;0.0;0.0&apos;"/>
    </SubTree>
  </TreeNodesModel>

</root>
